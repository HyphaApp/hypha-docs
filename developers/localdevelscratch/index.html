
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Hypha, an open source submission management platform.">
      
      
      
        <link rel="canonical" href="https://docs.hypha.app/developers/localdevelscratch/">
      
      <link rel="icon" href="https://www.hypha.app/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Local Development from Scratch - Hypha docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-development-from-scratch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Hypha docs" class="md-header__button md-logo" aria-label="Hypha docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hypha docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Local Development from Scratch
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HyphaApp/hypha-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../administrators/configuration/" class="md-tabs__link">
        Administrators
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        Contributing
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../admin/" class="md-tabs__link md-tabs__link--active">
        Developers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../maintenance/" class="md-tabs__link">
        Maintenance
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../staff/" class="md-tabs__link">
        Staff
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../glossary/" class="md-tabs__link">
      Glossary
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hypha docs" class="md-nav__button md-logo" aria-label="Hypha docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Hypha docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HyphaApp/hypha-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Administrators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Administrators" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Administrators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../administrators/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../administrators/customising/" class="md-nav__link">
        Customising
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../administrators/deployment/">Deployment</a>
          
            <label for="__nav_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Deployment" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../administrators/deployment/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../administrators/deployment/heroku/" class="md-nav__link">
        Heroku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../administrators/deployment/stand-alone/" class="md-nav__link">
        Stand Alone
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../contributing/">Contributing</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/codeofconduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/contribute-to-documentation/" class="md-nav__link">
        Contribute to Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../contributing/code/">Code</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Code" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/code/implementationdetails/" class="md-nav__link">
        Implementation Details
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/code/submittingchanges/" class="md-nav__link">
        Submitting Changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/code/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Developers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developers" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        Menu items: an overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../createusers/" class="md-nav__link">
        Create a new User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../localdeveldocker/" class="md-nav__link">
        Local Development with Docker
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Local Development from Scratch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Local Development from Scratch
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domains-for-local-development" class="md-nav__link">
    Domains for local development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-the-code" class="md-nav__link">
    Get the code
  </a>
  
    <nav class="md-nav" aria-label="Get the code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-media-directory" class="md-nav__link">
    Create media directory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-virtual-environment" class="md-nav__link">
    Python virtual environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-python-packages" class="md-nav__link">
    Install Python packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-node-packages" class="md-nav__link">
    Install Node packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-postgres-database" class="md-nav__link">
    The Postgres database
  </a>
  
    <nav class="md-nav" aria-label="The Postgres database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-installs-might-require-setting-up-a-user" class="md-nav__link">
    Linux installs might require setting up a user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macos-users-might-need-this-fix" class="md-nav__link">
    macOS users might need this fix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-stellar-for-db-snapshots" class="md-nav__link">
    Use stellar for db snapshots
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-settings" class="md-nav__link">
    Local settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-log-directory" class="md-nav__link">
    Create log directory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-gunicorn" class="md-nav__link">
    Set up Gunicorn
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-apache-or-nginx" class="md-nav__link">
    Set up Apache or Nginx
  </a>
  
    <nav class="md-nav" aria-label="Set up Apache or Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    Apache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    Nginx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#front-end-development" class="md-nav__link">
    Front end development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finally-the-app-itself" class="md-nav__link">
    Finally, the app itself
  </a>
  
    <nav class="md-nav" aria-label="Finally, the app itself">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-the-sandbox-db-to-get-some-demo-content" class="md-nav__link">
    Load the sandbox db to get some demo content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or-create-a-db-from-scratch" class="md-nav__link">
    Or create a db from scratch.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-tests" class="md-nav__link">
    Run tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    Administration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-things" class="md-nav__link">
    Useful things
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notifications/" class="md-nav__link">
        Notifications: an overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security2fa/" class="md-nav__link">
        Two Factor Authentication (2FA)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../userrolespermissions/" class="md-nav__link">
        User permissions and their defaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wagtail/" class="md-nav__link">
        Wagtail in Hypha
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        What is a workflow?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../maintenance/">Maintenance</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Maintenance" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Maintenance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../staff/">Staff</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Staff" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Staff
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/create-a-user-account/" class="md-nav__link">
        Create a user account
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/localization-and-translation/" class="md-nav__link">
        Localization and Translation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/login/" class="md-nav__link">
        How to login
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../staff/set-up-your-first-application/">Set up your first application</a>
          
            <label for="__nav_6_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Set up your first application" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Set up your first application
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/set-up-your-first-application/select-a-workflow/" class="md-nav__link">
        Select a Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/set-up-your-first-application/setting-up-a-form/" class="md-nav__link">
        Setting up a form
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/set-up-your-first-application/setting-up-a-round/" class="md-nav__link">
        Setting up a round
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/set-up-your-first-application/setting-up-funds-and-labs/" class="md-nav__link">
        Setting up funds and labs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" type="checkbox" id="__nav_6_6" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../staff/user-roles/">User roles</a>
          
            <label for="__nav_6_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="User roles" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          User roles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/user-roles/applicant/" class="md-nav__link">
        Applicant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/user-roles/hypha_roles/" class="md-nav__link">
        Staff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/user-roles/partner/" class="md-nav__link">
        Partner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../staff/user-roles/reviewer/" class="md-nav__link">
        Reviewer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/HyphaApp/hypha-docs/edit/main/docs/developers/localdevelscratch.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="local-development-from-scratch">Local Development from Scratch<a class="headerlink" href="#local-development-from-scratch" title="Permanent link">&para;</a></h1>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>Make sure you have these things installed on your system:</p>
<ul>
<li>Git</li>
<li>Python 3.9.x</li>
<li>python3-venv <span class="arithmatex"><span class="MathJax_Preview">to setup virtual enviroment</span><script type="math/tex">to setup virtual enviroment</script></span></li>
<li>python3-pip <span class="arithmatex"><span class="MathJax_Preview">to install python packages</span><script type="math/tex">to install python packages</script></span></li>
<li>PostgreSQL 12.x</li>
<li>libpq-dev <span class="arithmatex"><span class="MathJax_Preview">on Linux at least</span><script type="math/tex">on Linux at least</script></span></li>
<li>Apache or Nginx</li>
<li>Node 16.x</li>
</ul>
<p>On Linux install them with your normal package manager. On macOS <a href="https://brew.sh/">Homebrew</a> is an excellent option.</p>
<p>For Windows <a href="https://chocolatey.org/">Chocolatey</a> seems popular but we have no experience with Windows.</p>
<h2 id="domains-for-local-development">Domains for local development<a class="headerlink" href="#domains-for-local-development" title="Permanent link">&para;</a></h2>
<p>You will need two domain to run this app. One for the public site and one for the apply site.</p>
<p>Add this to your <code>/etc/hosts</code> file. <span class="arithmatex"><span class="MathJax_Preview">Feel free to use another name but then remember to use it in all the commands below.</span><script type="math/tex">Feel free to use another name but then remember to use it in all the commands below.</script></span></p>
<div class="highlight"><pre><span></span><code>127.0.0.1 hypha.test
127.0.0.1 apply.hypha.test
</code></pre></div>
<p>The "<a href="https://en.wikipedia.org/wiki/.test">test</a>" TLD is safe to use, it's reserved for testing purposes.</p>
<p>OBS! All examples from now on will use the <code>hypha.test</code> domains.</p>
<h2 id="get-the-code">Get the code<a class="headerlink" href="#get-the-code" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>$ git clone https://github.com/HyphaApp/hypha.git hypha

$ cd hypha
</code></pre></div>
<h3 id="create-media-directory">Create media directory<a class="headerlink" href="#create-media-directory" title="Permanent link">&para;</a></h3>
<p>In production media is stored on AWS S3 but for local development you need a "media" directory.</p>
<div class="highlight"><pre><span></span><code>$ mkdir media
</code></pre></div>
<p>OBS! Everything from now on will happen inside the hypha directory.</p>
<h2 id="python-virtual-environment">Python virtual environment<a class="headerlink" href="#python-virtual-environment" title="Permanent link">&para;</a></h2>
<p>Create the virtual environment, specify the python binary to use and the directory. Then source the activate script to activate the virtual environment. The last line tells Django what settings to use.</p>
<div class="highlight"><pre><span></span><code>$ python3 -m venv venv/hypha
$ source venv/hypha/bin/activate
$ export DJANGO_SETTINGS_MODULE=hypha.settings.dev
</code></pre></div>
<p>Inside your activated virtual environment you will use plain <code>python</code> and <code>pip</code> commands. Everything inside the virtual environment is python 3 since we specified that when we created it.</p>
<p>Each time you open up a new shell to work with the app you will need to activate the virtual environment.</p>
<div class="highlight"><pre><span></span><code>$ cd /path/to/application/hypha
$ source venv/hypha/bin/activate
$ export DJANGO_SETTINGS_MODULE=hypha.settings.dev
</code></pre></div>
<h2 id="install-python-packages">Install Python packages<a class="headerlink" href="#install-python-packages" title="Permanent link">&para;</a></h2>
<p>All the needed python packages for production are listed in the <code>requirements.txt</code> file. Additional packages for development are listed in <code>requirements-dev.txt</code>, it also includes everything from the <code>requirements.txt</code> file.</p>
<p>For a development environment you then run:</p>
<div class="highlight"><pre><span></span><code>$ pip install -r requirements-dev.txt
</code></pre></div>
<p>If any <code>requirements*.txt</code> file have been updated you will need to rerun this command to get the updated/added packages.</p>
<p><strong>Note for macOS users:</strong> If <code>pip</code> does not want to build "psycopg2" you need to add openssl to your "LIBRARY_PATH". Assuming you have openssl installed with homebrew the following should work.</p>
<div class="highlight"><pre><span></span><code>$ export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/opt/openssl/lib/
</code></pre></div>
<h2 id="install-node-packages">Install Node packages<a class="headerlink" href="#install-node-packages" title="Permanent link">&para;</a></h2>
<p>All the needed Node packages are listed in <code>package.json</code>. Install them with this command.</p>
<div class="highlight"><pre><span></span><code>$ npm install
</code></pre></div>
<h2 id="the-postgres-database">The Postgres database<a class="headerlink" href="#the-postgres-database" title="Permanent link">&para;</a></h2>
<p>If the <code>createdb</code>and <code>dropdb</code> is not available you will need to add the Postgres bin directory to your path or call the commands with complete path.</p>
<p>Create a database for the app.</p>
<div class="highlight"><pre><span></span><code>$ createdb hypha
</code></pre></div>
<p>To drop a database use.</p>
<div class="highlight"><pre><span></span><code>$ dropdb hypha
</code></pre></div>
<h3 id="linux-installs-might-require-setting-up-a-user">Linux installs might require setting up a user<a class="headerlink" href="#linux-installs-might-require-setting-up-a-user" title="Permanent link">&para;</a></h3>
<p>On Linux you might need to run as the "postgres" user first when setting up Postgres. Use it to create the database and set up a database user. For local development I suggest creating a user with the same name as your account, then you will not need to specify it on every command.</p>
<div class="highlight"><pre><span></span><code>$ su - postgres
$ createdb hypha
$ createuser [your-account-name]
</code></pre></div>
<h3 id="macos-users-might-need-this-fix">macOS users might need this fix<a class="headerlink" href="#macos-users-might-need-this-fix" title="Permanent link">&para;</a></h3>
<p>To make the app find the Postgres socket you might need to update the "unix_socket_directories" setting in the <code>postgresql.conf</code> file.</p>
<div class="highlight"><pre><span></span><code>unix_socket_directories = &#39;/tmp, /var/pgsql_socket&#39;
</code></pre></div>
<h3 id="use-stellar-for-db-snapshots">Use stellar for db snapshots<a class="headerlink" href="#use-stellar-for-db-snapshots" title="Permanent link">&para;</a></h3>
<p>If you installed "stellar" you can use it to take snapshots and restore them.</p>
<div class="highlight"><pre><span></span><code>$ stellar snapshot hypha_2019-10-01
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ stellar restore hypha_2019-10-01
</code></pre></div>
<h2 id="local-settings">Local settings<a class="headerlink" href="#local-settings" title="Permanent link">&para;</a></h2>
<p>On production it's recommended to use environment variables for all settings. For local development putting them in a file is however convenient.</p>
<p>When you use the "dev" settings it will included all the setting you put in <code>local.py</code>.</p>
<p>Copy the local settings example file.</p>
<div class="highlight"><pre><span></span><code>$ cp -p hypha/settings/local.py.example hypha/settings/local.py
</code></pre></div>
<p>(It is also possible to use a local <code>.env</code> file since Hypha use the <a href="https://github.com/sloria/environs">environs</a> package.)</p>
<p>You most likely want to set these:</p>
<ul>
<li><code>ALLOWED_HOSTS</code></li>
<li><code>BASE_URL</code></li>
<li><code>SECRET_KEY</code></li>
</ul>
<p>If you have a problem with "CSRF cookie not set".</p>
<div class="highlight"><pre><span></span><code>CSRF_COOKIE_SAMESITE = None
SESSION_COOKIE_SAMESITE = None
</code></pre></div>
<p>If you do not use the app name for the database.</p>
<div class="highlight"><pre><span></span><code>import dj_database_url

DATABASES = {
    &#39;default&#39;: dj_database_url.config(
        conn_max_age=600,
        default=&#39;postgres:///your_db_name&#39;
    )
}
</code></pre></div>
<h2 id="create-log-directory">Create log directory<a class="headerlink" href="#create-log-directory" title="Permanent link">&para;</a></h2>
<p><code>mkdir -p var/log/</code></p>
<h2 id="set-up-gunicorn">Set up Gunicorn<a class="headerlink" href="#set-up-gunicorn" title="Permanent link">&para;</a></h2>
<p>Gunicorn is installed inside the virtual environment since it's listed in <code>requirements.txt</code>.</p>
<p>At the bottom of this file you find a handy script for Gunicorn. For a quick test you can run this command from your site directory.</p>
<div class="highlight"><pre><span></span><code>$ gunicorn hypha.wsgi:application --env DJANGO_SETTINGS_MODULE=hypha.settings.dev --bind 127.0.0.1:9001
</code></pre></div>
<p>Quit the server with <code>ctrl-c</code> when you done testing.</p>
<ul>
<li><code>hypha.wsgi:application</code> links it up to the app via the <code>hypha/wsgi.py</code> file.</li>
<li><code>--env …</code> tells it what settings to use, for development your want "dev" settings.</li>
<li><code>--bind …</code> makes it listen on localhost port 9001. Socket works as well but on macOS they have given me issues, while tcp connections always seems to just work.</li>
</ul>
<h2 id="set-up-apache-or-nginx">Set up Apache or Nginx<a class="headerlink" href="#set-up-apache-or-nginx" title="Permanent link">&para;</a></h2>
<p>Set up new vhost for Apache or Nginx. We let the web server handle static files and proxy everything else over to Gunicorn.</p>
<p>The examples uses port 80 for web server and port 9001 for WSGI, feel free to change that if needed. You maybe are already running other services on these ports or prefer to not run the web server as root and want a port above 1024.</p>
<h3 id="apache">Apache<a class="headerlink" href="#apache" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>&lt;VirtualHost 127.0.0.1:80&gt;
  ServerName hypha.test
  ServerAlias apply.hypha.test
  DocumentRoot &quot;/path/to/application/hypha/hypha&quot;


  Alias /media/ /path/to/application/hypha/media/
  Alias /static/ /path/to/application/hypha/static/
  Alias /static_src/ /path/to/application/hypha/hypha/static_src/

  &lt;Directory &quot;/path/to/application/hypha/static&quot;&gt;
    Require all granted
  &lt;/Directory&gt;

  &lt;Directory &quot;/path/to/application/hypha/media&quot;&gt;
    Require all granted
  &lt;/Directory&gt;

  &lt;Directory &quot;/path/to/application/hypha/hypha/static_src&quot;&gt;
    Require all granted
  &lt;/Directory&gt;

  &lt;IfModule mod_proxy_http.c&gt;
    &lt;Location &quot;/&quot;&gt;
      ProxyPreserveHost On
      ProxyPass http://127.0.0.1:9001/
      ProxyPassReverse http://127.0.0.1:9001/
    &lt;/Location&gt;

    &lt;LocationMatch &quot;^/(static|media|static_src)/&quot;&gt;
      ProxyPass !
    &lt;/LocationMatch&gt;

    &lt;LocationMatch &quot;^/[\w-]+\.(ico|json|png|txt)$&quot;&gt;
      ProxyPass !
    &lt;/LocationMatch&gt;
  &lt;/IfModule&gt;
&lt;/VirtualHost&gt;
</code></pre></div>
<h3 id="nginx">Nginx<a class="headerlink" href="#nginx" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>server {
    listen 80;
    server_name hypha.test apply.hypha.test;

    location /media/ {
        alias /path/to/application/hypha/media/;
    }

    location /static/ {
        alias /path/to/application/hypha/static/;
    }

    location / {
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_pass http://127.0.0.1:9001/;
    }

}
</code></pre></div>
<h2 id="front-end-development">Front end development<a class="headerlink" href="#front-end-development" title="Permanent link">&para;</a></h2>
<p>See the <code>package.json</code> file for a complete list of commands. Here are the most common in development.</p>
<p>This will watch all sass and js files for changes and build them with css maps. It will also run the "collecstatic" command, useful when running the site with a production server and not the built in dev server.</p>
<div class="highlight"><pre><span></span><code>$ npm run watch
</code></pre></div>
<p>To build all assets for development use this command.</p>
<div class="highlight"><pre><span></span><code>$ npm run dev:build
</code></pre></div>
<p>If you are working on the React components you also need to set "API_BASE_URL" to the correct value.</p>
<div class="highlight"><pre><span></span><code>$ export API_BASE_URL=&#39;http://apply.hypha.test/api&#39;
</code></pre></div>
<p>To build the assets which get deployed, use the following. The deployment scripts will handle this, and the files should not be committed.</p>
<div class="highlight"><pre><span></span><code>$ npm run build
</code></pre></div>
<h2 id="finally-the-app-itself">Finally, the app itself<a class="headerlink" href="#finally-the-app-itself" title="Permanent link">&para;</a></h2>
<p>Start by specifying what settings file is to be used <span class="arithmatex"><span class="MathJax_Preview">if you have not already done this, see above</span><script type="math/tex">if you have not already done this, see above</script></span>.</p>
<div class="highlight"><pre><span></span><code>$ export DJANGO_SETTINGS_MODULE=hypha.settings.dev
</code></pre></div>
<p>Then decide if you want to start with some demo content or with an empty db.</p>
<h3 id="load-the-sandbox-db-to-get-some-demo-content">Load the sandbox db to get some demo content<a class="headerlink" href="#load-the-sandbox-db-to-get-some-demo-content" title="Permanent link">&para;</a></h3>
<p>There is a <code>/public/sandbox_db.dump</code> file that has some demo content to get you started. Load it in with this command.</p>
<div class="highlight"><pre><span></span><code>$ pg_restore --verbose --clean --if-exists --no-acl --no-owner --dbname=hypha public/sandbox_db.dump
</code></pre></div>
<p>It's not always completely up to date so run:</p>
<div class="highlight"><pre><span></span><code>$ python manage.py migrate --noinput
</code></pre></div>
<h3 id="or-create-a-db-from-scratch">Or create a db from scratch.<a class="headerlink" href="#or-create-a-db-from-scratch" title="Permanent link">&para;</a></h3>
<p>Create the cache tables.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py createcachetable
</code></pre></div>
<p>Run all migrations to set up the database tables.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py migrate --noinput
</code></pre></div>
<p>Create the first super user.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py createsuperuser
</code></pre></div>
<p>Collect all the static files.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py collectstatic --noinput --settings=hypha.settings.dev
</code></pre></div>
<p>(If this command complain about missing <code>static_compiled</code> directory, run the <code>npm run dev:build</code> command above first.)</p>
<p>Set the addresses and ports of the two wagtail sites.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py wagtailsiteupdate hypha.test apply.hypha.test 80
</code></pre></div>
<p>Now you should be able to access the sites on <a href="http://hypha.test/">http://hypha.test/</a> and <a href="http://apply.hypha.test/">http://apply.hypha.test/</a></p>
<h3 id="run-tests">Run tests<a class="headerlink" href="#run-tests" title="Permanent link">&para;</a></h3>
<p>Hypha has specific settings for testing so specify them when you run the "test" command.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py test --settings=hypha.settings.test
</code></pre></div>
<p>If you need to rerun the tests several times this will speed them up considerably.</p>
<div class="highlight"><pre><span></span><code>$ python manage.py test --parallel --keepdb --settings=hypha.settings.test
</code></pre></div>
<h3 id="administration">Administration<a class="headerlink" href="#administration" title="Permanent link">&para;</a></h3>
<ul>
<li>The Apply dashboard: <a href="http://apply.hypha.test/dashboard/">http://apply.hypha.test/dashboard/</a></li>
<li>The Apply Wagtail admin: <a href="http://apply.hypha.test/admin/">http://apply.hypha.test/admin/</a></li>
<li>The Django Administration panel: <a href="http://apply.hypha.test/django-admin/">http://apply.hypha.test/django-admin/</a></li>
</ul>
<p>Use the email address and password you set in the <code>createsuperuser</code> step above to login.</p>
<h2 id="useful-things">Useful things<a class="headerlink" href="#useful-things" title="Permanent link">&para;</a></h2>
<p>Script to start/stop/restart gunicorn:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>

<span class="nb">set</span> -euo pipefail

<span class="nv">WORKERS</span><span class="o">=</span><span class="m">3</span>
<span class="nv">PORT</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">9001</span><span class="si">}</span>
<span class="nv">WSGI</span><span class="o">=</span><span class="k">$(</span>find . -name wsgi.py -not -path <span class="s2">&quot;./venv/*&quot;</span><span class="k">)</span>
<span class="nv">WSGI</span><span class="o">=</span><span class="si">${</span><span class="nv">WSGI</span><span class="p">%/*</span><span class="si">}</span>
<span class="nv">NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">WSGI</span><span class="p">##*/</span><span class="si">}</span>
<span class="nv">SETTINGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">.settings.</span><span class="si">${</span><span class="nv">3</span><span class="k">:-</span><span class="nv">dev</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">RUNDIR</span><span class="o">=</span><span class="s2">&quot;./var/run&quot;</span>
<span class="nv">LOGDIR</span><span class="o">=</span><span class="s2">&quot;./var/log&quot;</span>
<span class="nv">SOCK</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">RUNDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">-gunicorn.sock&quot;</span>
<span class="nv">PID</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">RUNDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">-gunicorn.pid&quot;</span>
<span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">-gunicorn.log&quot;</span>

<span class="k">function</span> start_gunicorn <span class="o">{</span>
  <span class="k">if</span> <span class="o">[[</span> ! -d <span class="s2">&quot;</span><span class="si">${</span><span class="nv">RUNDIR</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    mkdir -p <span class="s2">&quot;</span><span class="si">${</span><span class="nv">RUNDIR</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">else</span>
    rm -rf <span class="s2">&quot;</span><span class="si">${</span><span class="nv">RUNDIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NAME</span><span class="si">}</span><span class="s2">*&quot;</span>
  <span class="k">fi</span>

  <span class="k">if</span> <span class="o">[[</span> ! -d <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    mkdir -p <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOGDIR</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">fi</span>

  <span class="nb">exec</span> gunicorn <span class="se">\</span>
      <span class="si">${</span><span class="nv">NAME</span><span class="si">}</span>.wsgi:application <span class="se">\</span>
      --env <span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span><span class="si">${</span><span class="nv">SETTINGS</span><span class="si">}</span> <span class="se">\</span>
      --pid <span class="si">${</span><span class="nv">PID</span><span class="si">}</span> <span class="se">\</span>
      --bind <span class="m">127</span>.0.0.1:<span class="si">${</span><span class="nv">PORT</span><span class="si">}</span> <span class="se">\</span>
      --workers <span class="si">${</span><span class="nv">WORKERS</span><span class="si">}</span> <span class="se">\</span>
      --name <span class="si">${</span><span class="nv">NAME</span><span class="si">}</span> <span class="se">\</span>
      --daemon <span class="se">\</span>
      --reload <span class="se">\</span>
      --log-file<span class="o">=</span><span class="si">${</span><span class="nv">LOGFILE</span><span class="si">}</span> <span class="se">\</span>
      --log-level error
  <span class="nb">echo</span> <span class="s2">&quot;Gunicorn started.&quot;</span>
<span class="o">}</span>

<span class="k">function</span> stop_gunicorn <span class="o">{</span>
    <span class="nb">kill</span> <span class="sb">`</span>cat <span class="nv">$PID</span><span class="sb">`</span>
    <span class="nb">echo</span> <span class="s2">&quot;Gunicorn stopped.&quot;</span>
<span class="o">}</span>

<span class="k">case</span> <span class="nv">$1</span> <span class="k">in</span>
  start<span class="o">)</span>
    start_gunicorn
  <span class="p">;;</span>
  stop<span class="o">)</span>
    stop_gunicorn
  <span class="p">;;</span>
  restart<span class="o">)</span>
    stop_gunicorn
    start_gunicorn
  <span class="p">;;</span>
  *<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">&quot;Not a recognised command, use start/stop/restart.&quot;</span>
  <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div>




              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../localdeveldocker/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Local Development with Docker" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Local Development with Docker
            </div>
          </div>
        </a>
      
      
        
        <a href="../notifications/" class="md-footer__link md-footer__link--next" aria-label="Next: Notifications: an overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Notifications: an overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://chat.hypha.app/" target="_blank" rel="noopener" title="Hypha Chat" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8Z"/></svg>
    </a>
  
    
    
    <a href="https://we.hypha.app/" target="_blank" rel="noopener" title="Hypha Forum" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 12V3a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v14l4-4h10a1 1 0 0 0 1-1m4-6h-2v9H6v2a1 1 0 0 0 1 1h11l4 4V7a1 1 0 0 0-1-1Z"/></svg>
    </a>
  
    
    
    <a href="https://github.com/HyphaApp/" target="_blank" rel="noopener" title="GitHub Org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.top", "toc.integrate", "header.autohide"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>